)]}'
{"version":3,"sources":["mpowaga:autoform-summernote/lib/client/templates.html","mpowaga:autoform-summernote/lib/client/templates.js","mpowaga:autoform-summernote/lib/client/autoform-summernote.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,qC;AACA,8E;AACA,kB;AACA,yC;AACA,uD;AACA,M;AACA,I;;;;;;;;;;;;;;;;;;;ACPA,6C;AACA,gD;AACA,E;;AAEA,6C;AACA,kB;AACA,8C;AACA,kC;AACA,E;AACA,8B;AACA,gC;AACA,qB;AACA,uC;AACA,oC;AACA,K;AACA,I;;AAEA,8B;;AAEA,4B;AACA,mC;AACA,K;;AAEA,kD;AACA,qB;AACA,K;AACA,E;;AAEA,+B;AACA,qB;AACA,oB;;AAEA,O;AACA,oE;AACA,qE;AACA,qE;AACA,O;AACA,qC;AACA,kC;AACA,yC;AACA,gC;AACA,O;AACA,O;AACA,I;AACA,yC;AACA,G;AACA,G;;;;;;;;;;;;;;;;;;AC9CA,qC;AACA,0B;AACA,uB;AACA,qB;AACA,E;AACA,G","file":"/packages/mpowaga_autoform-summernote.js","sourcesContent":["\nTemplate.__checkName(\"afSummernote\");\nTemplate[\"afSummernote\"] = new Template(\"Template.afSummernote\", (function() {\n  var view = this;\n  return HTML.DIV(HTML.Attrs(function() {\n    return Spacebars.attrMustache(view.lookup(\"atts\"));\n  }));\n}));\n","Template.afSummernote.created = function () {\n  this.value = new ReactiveVar(this.data.value);\n};\n\nTemplate.afSummernote.rendered = function() {\n  var self = this;\n  var options = this.data.atts.settings || {};\n  var $editor = $(this.firstNode);\n  \n  var onblur = options.onblur;\n  options.onblur = function(e) {\n    $editor.change();\n    if (typeof onblur === 'function') {\n      onblur.apply(this, arguments);\n    }\n  };\n\n  $editor.summernote(options);\n\n  this.autorun(function () {\n    $editor.code(self.value.get());\n  });\n\n  $editor.closest('form').on('reset', function() {\n    $editor.code('');\n  });\n};\n\nTemplate.afSummernote.helpers({\n  atts: function () {\n    var self = this;\n\n    /**\n     * This is bit hacky but created and rendered callback sometimes\n     * (or always?) get empty value. This helper gets called multiple\n     * times so we intercept and save the value once it is not empty.\n     */\n    Tracker.nonreactive(function () {\n      var t = Template.instance();\n      if (!t.value.get() && self.value) {\n        t.value.set(self.value);\n      }\n    });\n    \n    return _.omit(this.atts, 'settings');\n  }\n});","AutoForm.addInputType('summernote', {\n\ttemplate: 'afSummernote',\n\tvalueOut: function() {\n\t\treturn this.code();\n\t}\n});\n"]}